const fs = require('fs');
const path = require('path');

// Reads API_BASE from environment and writes api-config.js for the frontend
const apiBase = process.env.API_BASE || process.env.NEXT_PUBLIC_API_BASE || 'http://localhost:3000';
const dest = path.join(__dirname, '..', 'api-config.js');

const content = `// Auto-generated by scripts/generate-api-config.js\n` +
`// Set API_BASE via environment variable API_BASE during build/deploy.\n` +
`const API_BASE = '${apiBase}';\n` +
`// End of file\n`;

fs.writeFileSync(dest, content, { encoding: 'utf8' });
console.log('Wrote', dest, 'with API_BASE =', apiBase);
